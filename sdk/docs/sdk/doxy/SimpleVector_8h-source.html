<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>SimpleVector.h Source File</title>

<SCRIPT LANGUAGE="JavaScript" SRC="../io.js"></SCRIPT>
<link rel="STYLESHEET" type="text/css" href="../iObjectsStyle.css">
</head>

<body lang=EN-US link=blue vlink=purple>
<table width="100%" >
<tr><td align="left" width="33%"><a href="../doxy/SimplePlaylist_8h-source.html" title='SimplePlaylist.h'><img src='../images/previous.gif' width=78 height=10 border='0'></a></td><td align="center" width="33%">
<SCRIPT LANGUAGE="JavaScript">
   if (parent.frames.length>1){
       document.write('<A HREF="JavaScript:SwitchView(0);"><img src="../images/pagevw.gif" width=49 height=10 border="0"></A>');
   }else{
       document.write('<A HREF="JavaScript:SwitchView(1);"><img src="../images/normalvw.gif" width=60 height=8 border="0"></A>');
   }
</SCRIPT>
</td><td align="right" width="33%">
<a href="../doxy/SRCFilterKeys_8h-source.html" title='SRCFilterKeys.h'><img src='../images/next.gif' width=60 height=10 border='0'></a></td></tr>
</table><!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>SimpleVector.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// SimpleVector.h</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 1998 - 2001 Interactive Objects (TM). All rights reserved</font>
00005 <font class="comment">//</font>
00006 <font class="comment">// This file was distributed as part of the Dadio (TM) Software Development Kit</font>
00007 <font class="comment">//     under the Dadio (TM) Software Development Kit license. Please see the file</font>
00008 <font class="comment">//     "Dadio Software Development Kit license agreement.pdf" contained in the</font>
00009 <font class="comment">//     "Legal" folder on the Dadio Distribution CD.</font>
00010 <font class="comment">//</font>
00011 
00012 <font class="preprocessor">#ifndef SIMPLEVECTOR_H_</font>
00013 <font class="preprocessor"></font><font class="preprocessor">#define SIMPLEVECTOR_H_</font>
00014 <font class="preprocessor"></font>
00015 <font class="comment">// If defined, then memcpy is used when growing the array, skipping the data's assignment operator.</font>
00016 <font class="preprocessor">#define FAST_COPY</font>
00017 <font class="preprocessor"></font>
00021 template&lt;class DataType&gt;
<a name="l00022"></a><a class="code" href="classSimpleVector.html">00022</a> <font class="keyword">class </font><a class="code" href="classSimpleVector.html">SimpleVector</a>
00023 {
00024 <font class="keyword">public</font>:
00025 
<a name="l00028"></a><a class="code" href="classSimpleVector.html#a0">00028</a>         <a class="code" href="classSimpleVector.html#a0">SimpleVector</a>(<font class="keywordtype">int</font> blockSize = 5)
00029                 : m_iBlockSize(blockSize),
00030                 m_cFilledBlocks(0)<font class="keyword"></font>
00031 <font class="keyword">        </font>{
00032         m_pDataVector = 0;
00033         m_cBlocks = 0;
00034         }
00035 
<a name="l00037"></a><a class="code" href="classSimpleVector.html#a1">00037</a>     <a class="code" href="classSimpleVector.html#a0">SimpleVector</a>(<font class="keyword">const</font> <a class="code" href="classSimpleVector.html">SimpleVector</a>&amp; sv)
00038         : m_iBlockSize(sv.m_iBlockSize),
00039         m_cFilledBlocks(sv.m_cFilledBlocks)<font class="keyword"></font>
00040 <font class="keyword">    </font>{
00041         <font class="keywordflow">if</font> (m_cFilledBlocks)
00042         {
00043             m_cBlocks = sv.m_cBlocks;
00044             m_pDataVector = <font class="keyword">new</font> DataType[m_cBlocks];
00045                     memcpy(m_pDataVector, sv.m_pDataVector, m_cFilledBlocks * <font class="keyword">sizeof</font>(DataType));
00046         }
00047         <font class="keywordflow">else</font>
00048         {
00049             m_cBlocks = 0;
00050             m_pDataVector = 0;
00051         }
00052     }
00053 
00054         ~SimpleVector()<font class="keyword"></font>
00055 <font class="keyword">        </font>{
00056                 <font class="keyword">delete</font> [] m_pDataVector;
00057         }
00058 
<a name="l00060"></a><a class="code" href="classSimpleVector.html#a3">00060</a>     <a class="code" href="classSimpleVector.html">SimpleVector</a>&amp; <a class="code" href="classSimpleVector.html#a3">operator=</a>(<font class="keyword">const</font> <a class="code" href="classSimpleVector.html">SimpleVector</a>&amp; sv)<font class="keyword"></font>
00061 <font class="keyword">    </font>{
00062         m_iBlockSize = sv.m_iBlockSize;
00063         m_cFilledBlocks = sv.m_cFilledBlocks;
00064         <font class="keyword">delete</font> [] m_pDataVector;
00065         <font class="keywordflow">if</font> (m_cFilledBlocks)
00066         {
00067             m_cBlocks = sv.m_cBlocks;
00068             m_pDataVector = <font class="keyword">new</font> DataType[m_cBlocks];
00069                     memcpy(m_pDataVector, sv.m_pDataVector, m_cFilledBlocks * <font class="keyword">sizeof</font>(DataType));
00070         }
00071         <font class="keywordflow">else</font>
00072         {
00073             m_cBlocks = 0;
00074             m_pDataVector = 0;
00075         }
00076         <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00077     }
00078 
<a name="l00081"></a><a class="code" href="classSimpleVector.html#a4">00081</a>         <font class="keywordtype">void</font> <a class="code" href="classSimpleVector.html#a4">PushBack</a>(DataType pData)<font class="keyword"></font>
00082 <font class="keyword">        </font>{
00083                 <font class="keywordflow">if</font> (m_cFilledBlocks == m_cBlocks)
00084                 {
00085                         <font class="comment">// The array is full, so copy the data to a temporary buffer,</font>
00086                         <font class="comment">// allocate new memory for the array, and copy the data back.</font>
00087                         m_cBlocks += m_iBlockSize;
00088                         DataType* pNewVector = <font class="keyword">new</font> DataType [m_cBlocks];
00089 <font class="preprocessor">#ifdef FAST_COPY</font>
00090 <font class="preprocessor"></font>            memcpy(pNewVector, m_pDataVector, m_cFilledBlocks * <font class="keyword">sizeof</font>(DataType));
00091 <font class="preprocessor">#else   // FAST_COPY</font>
00092 <font class="preprocessor"></font>                        <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> i = 0; i &lt; m_cFilledBlocks; ++i)
00093                                 pNewVector[i] = m_pDataVector[i];
00094 <font class="preprocessor">#endif  // FAST_COPY</font>
00095 <font class="preprocessor"></font>
00096                         <font class="keyword">delete</font> [] m_pDataVector;
00097                         m_pDataVector = pNewVector;
00098                 }
00099                 m_pDataVector[m_cFilledBlocks++] = pData;
00100         }
00101 
<a name="l00104"></a><a class="code" href="classSimpleVector.html#a5">00104</a>         DataType <a class="code" href="classSimpleVector.html#a5">PopBack</a>()<font class="keyword"></font>
00105 <font class="keyword">        </font>{
00106                 <font class="keywordflow">return</font> m_pDataVector[--m_cFilledBlocks];
00107         }
00108 
<a name="l00111"></a><a class="code" href="classSimpleVector.html#a6">00111</a>         DataType <a class="code" href="classSimpleVector.html#a6">Remove</a>(<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> index)<font class="keyword"></font>
00112 <font class="keyword">        </font>{
00113                 DataType temp = m_pDataVector[index];
00114                 <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> i = index; i &lt; m_cFilledBlocks - 1; ++i)
00115                         m_pDataVector[i] = m_pDataVector[i + 1];
00116                 --m_cFilledBlocks;
00117                 <font class="keywordflow">return</font> temp;
00118         }
00119 
<a name="l00121"></a><a class="code" href="classSimpleVector.html#a7">00121</a>         <font class="keywordtype">void</font> <a class="code" href="classSimpleVector.html#a7">Clear</a>()<font class="keyword"></font>
00122 <font class="keyword">        </font>{
00123                 m_cFilledBlocks = 0;
00124         }
00125 
<a name="l00127"></a><a class="code" href="classSimpleVector.html#a8">00127</a>         <font class="keywordtype">int</font> <a class="code" href="classSimpleVector.html#a8">Size</a>()<font class="keyword"> const</font>
00128 <font class="keyword">        </font>{
00129                 <font class="keywordflow">return</font> m_cFilledBlocks;
00130         }
00131 
<a name="l00133"></a><a class="code" href="classSimpleVector.html#a9">00133</a>         <font class="keywordtype">bool</font> <a class="code" href="classSimpleVector.html#a9">IsEmpty</a>()<font class="keyword"> const</font>
00134 <font class="keyword">        </font>{
00135                 <font class="keywordflow">return</font> (m_cFilledBlocks == 0);
00136         }
00137 
<a name="l00139"></a><a class="code" href="classSimpleVector.html#a10">00139</a>         <font class="keyword">const</font> DataType&amp; <a class="code" href="classSimpleVector.html#a10">operator[]</a>(<font class="keywordtype">int</font> pos)<font class="keyword"> const</font>
00140 <font class="keyword">        </font>{
00141                 <font class="keywordflow">return</font> m_pDataVector[pos];
00142         }
00143 
<a name="l00145"></a><a class="code" href="classSimpleVector.html#a11">00145</a>         DataType&amp; <a class="code" href="classSimpleVector.html#a10">operator[]</a>(<font class="keywordtype">int</font> pos)<font class="keyword"></font>
00146 <font class="keyword">        </font>{
00147                 <font class="keywordflow">return</font> m_pDataVector[pos];
00148         }
00149 
00151 <font class="keyword">typedef</font> <font class="keywordtype">bool</font> <a class="code" href="classSimpleVector.html#a12">CompareDataFunction</a>(<font class="keyword">const</font> DataType&amp; a, <font class="keyword">const</font> DataType&amp; b);
00152 
<a name="l00154"></a><a class="code" href="classSimpleVector.html#a13">00154</a>         <font class="keywordtype">void</font> <a class="code" href="classSimpleVector.html#a13">Sort</a>(CompareDataFunction&amp; compareDataFunction)<font class="keyword"></font>
00155 <font class="keyword">        </font>{
00156                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 1; i &lt; <a class="code" href="classSimpleVector.html#a8">Size</a>(); ++i)
00157                 {
00158                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> j = i; j &gt; 0; --j)
00159                                 <font class="keywordflow">if</font> (!compareDataFunction(m_pDataVector[j - 1], m_pDataVector[j]))
00160                                 {
00161                                         DataType swap = m_pDataVector[j];
00162                                         m_pDataVector[j] = m_pDataVector[j - 1];
00163                                         m_pDataVector[j - 1] = swap;
00164                                 }
00165                                 <font class="keywordflow">else</font>
00166                                         <font class="keywordflow">break</font>;
00167                 }
00168         }
00169 
<a name="l00172"></a><a class="code" href="classSimpleVector.html#a14">00172</a>     <font class="keywordtype">int</font> <a class="code" href="classSimpleVector.html#a14">Find</a>(<font class="keyword">const</font> DataType&amp; data)<font class="keyword"></font>
00173 <font class="keyword">    </font>{
00174         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; <a class="code" href="classSimpleVector.html#a8">Size</a>(); ++i)
00175             <font class="keywordflow">if</font> (m_pDataVector[i] == data)
00176                 <font class="keywordflow">return</font> i;
00177         <font class="keywordflow">return</font> -1;
00178     }
00179 
<a name="l00182"></a><a class="code" href="classSimpleVector.html#a15">00182</a>         <font class="keywordtype">bool</font> <a class="code" href="classSimpleVector.html#a15">Insert</a>(DataType pData, <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> index)<font class="keyword"></font>
00183 <font class="keyword">        </font>{
00184                 <font class="keywordflow">if</font> (index &gt; m_cFilledBlocks + 1)
00185                         <font class="keywordflow">return</font> <font class="keyword">false</font>;
00186 
00187                 <font class="keywordflow">if</font> (m_cFilledBlocks == m_cBlocks)
00188                 {
00189                         <font class="comment">// The array is full, so copy the data to a temporary buffer,</font>
00190                         <font class="comment">// allocate new memory for the array, and copy the data back.</font>
00191                         m_cBlocks += m_iBlockSize;
00192                         DataType* pNewVector = <font class="keyword">new</font> DataType [m_cBlocks];
00193 <font class="preprocessor">#ifdef FAST_COPY</font>
00194 <font class="preprocessor"></font>                        <font class="keywordflow">if</font> (index &gt; 0)
00195                                 memcpy(pNewVector, m_pDataVector, index * <font class="keyword">sizeof</font>(DataType));
00196                         pNewVector[index] = pData;
00197             <font class="keywordflow">if</font> (index &lt; m_cFilledBlocks)
00198                             memcpy(&amp;(pNewVector[index + 1]), &amp;(m_pDataVector[index]), (m_cFilledBlocks - index + 1) * <font class="keyword">sizeof</font>(DataType));
00199 <font class="preprocessor">#else   // FAST_COPY</font>
00200 <font class="preprocessor"></font>                        <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; index; ++i)
00201                                 pNewVector[i] = m_pDataVector[i];
00202                         pNewVector[index] = pData;
00203                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = index; i &lt; m_cFilledBlocks; ++i)
00204                                 pNewVector[i + 1] = m_pDataVector[i];
00205 <font class="preprocessor">#endif  // FAST_COPY</font>
00206 <font class="preprocessor"></font>                        ++m_cFilledBlocks;
00207 
00208                         <font class="keyword">delete</font> [] m_pDataVector;
00209                         m_pDataVector = pNewVector;
00210                 }
00211                 <font class="keywordflow">else</font>
00212                 {
00213                         <font class="keywordflow">for</font> (<font class="keywordtype">unsigned</font> <font class="keywordtype">int</font> i = m_cFilledBlocks; i &gt; index; --i)
00214                                 m_pDataVector[i] = m_pDataVector[i - 1];
00215                         m_pDataVector[index] = pData;
00216                         ++m_cFilledBlocks;
00217                 }
00218 
00219                 <font class="keywordflow">return</font> <font class="keyword">true</font>;
00220         }
00221 
<a name="l00223"></a><a class="code" href="classSimpleVector.html#a16">00223</a>         <font class="keywordtype">bool</font> <a class="code" href="classSimpleVector.html#a15">Insert</a>(DataType pData, CompareDataFunction&amp; compareDataFunction)<font class="keyword"></font>
00224 <font class="keyword">        </font>{
00225                 <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; <a class="code" href="classSimpleVector.html#a8">Size</a>(); ++i)
00226                         <font class="keywordflow">if</font> (compareDataFunction(pData, m_pDataVector[i]))
00227                                 <font class="keywordflow">return</font> <a class="code" href="classSimpleVector.html#a15">Insert</a>(pData, i);
00228                 <a class="code" href="classSimpleVector.html#a4">PushBack</a>(pData);
00229                 <font class="keywordflow">return</font> <font class="keyword">true</font>;
00230         }
00231 
<a name="l00235"></a><a class="code" href="classSimpleVector.html#a17">00235</a>         <font class="keywordtype">void</font> <a class="code" href="classSimpleVector.html#a17">Move</a>(<font class="keywordtype">int</font> indexA, <font class="keywordtype">int</font> indexB)<font class="keyword"></font>
00236 <font class="keyword">        </font>{
00237                 DataType temp = m_pDataVector[indexA];
00238                 <font class="keywordflow">if</font> (indexA &gt; indexB)
00239                 {
00240                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = indexA; i &gt; indexB; --i)
00241                                 m_pDataVector[i] = m_pDataVector[i - 1];
00242                         m_pDataVector[indexB] = temp;
00243                 }
00244                 <font class="keywordflow">else</font>
00245                 {
00246                         <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = indexA; i &lt; indexB; ++i)
00247                                 m_pDataVector[i] = m_pDataVector[i + 1];
00248                         m_pDataVector[indexB] = temp;
00249                 }
00250         }
00251 
00252 <font class="keyword">private</font>:
00253 
00254         DataType*               m_pDataVector;
00255         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>    m_iBlockSize;
00256         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>    m_cBlocks;
00257         <font class="keywordtype">unsigned</font> <font class="keywordtype">int</font>    m_cFilledBlocks;
00258 
00259 };
00260 
00261 
00262 
00263 <font class="preprocessor">#endif  // SIMPLEVECTOR_H_</font>
</font></pre></div>
	<hr><br><table width="100%" >
<tr><td align="left" width="33%"><a href="../doxy/SimplePlaylist_8h-source.html" title='SimplePlaylist.h'><img src='../images/previous.gif' width=78 height=10 border='0'></a></td><td align="center" width="33%">
<SCRIPT LANGUAGE="JavaScript">
   if (parent.frames.length>1){
       document.write('<A HREF="JavaScript:SwitchView(0);"><img src="../images/pagevw.gif" width=49 height=10 border="0"></A>');
   }else{
       document.write('<A HREF="JavaScript:SwitchView(1);"><img src="../images/normalvw.gif" width=60 height=8 border="0"></A>');
   }
</SCRIPT>
</td><td align="right" width="33%">
<a href="../doxy/SRCFilterKeys_8h-source.html" title='SRCFilterKeys.h'><img src='../images/next.gif' width=60 height=10 border='0'></a></td></tr>
</table><p class="Legal">
<a href="JavaScript:ShowCopyright();">Copyright &#169; 1998 - 2001</a> Interactive Objects<SUP><FONT SIZE="-3">TM</FONT></SUP>. All rights reserved.
<br>

 Last Modified on Oct 24, 2001 3:59 pm
</p>
</body>

</html>
