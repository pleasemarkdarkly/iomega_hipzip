<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
	<title>SimpleMap.h Source File</title>

<SCRIPT LANGUAGE="JavaScript" SRC="../io.js"></SCRIPT>
<link rel="STYLESHEET" type="text/css" href="../iObjectsStyle.css">
</head>

<body lang=EN-US link=blue vlink=purple>
<table width="100%" >
<tr><td align="left" width="33%"><a href="../doxy/SimpleList_8h-source.html" title='SimpleList.h'><img src='../images/previous.gif' width=78 height=10 border='0'></a></td><td align="center" width="33%">
<SCRIPT LANGUAGE="JavaScript">
   if (parent.frames.length>1){
       document.write('<A HREF="JavaScript:SwitchView(0);"><img src="../images/pagevw.gif" width=49 height=10 border="0"></A>');
   }else{
       document.write('<A HREF="JavaScript:SwitchView(1);"><img src="../images/normalvw.gif" width=60 height=8 border="0"></A>');
   }
</SCRIPT>
</td><td align="right" width="33%">
<a href="../doxy/SimpleMetadata_8h-source.html" title='SimpleMetadata.h'><img src='../images/next.gif' width=60 height=10 border='0'></a></td></tr>
</table><!-- Generated by Doxygen 1.2.9.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>SimpleMap.h</h1><div class="fragment"><pre>00001 <font class="comment">//</font>
00002 <font class="comment">// SimpleMap.h</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Copyright (c) 1998 - 2001 Interactive Objects (TM). All rights reserved</font>
00005 <font class="comment">//</font>
00006 <font class="comment">// This file was distributed as part of the Dadio (TM) Software Development Kit</font>
00007 <font class="comment">//     under the Dadio (TM) Software Development Kit license. Please see the file</font>
00008 <font class="comment">//     "Dadio Software Development Kit license agreement.pdf" contained in the</font>
00009 <font class="comment">//     "Legal" folder on the Dadio Distribution CD.</font>
00010 <font class="comment">//</font>
00011 
00012 <font class="preprocessor">#ifndef SIMPLEMAP_H_</font>
00013 <font class="preprocessor"></font><font class="preprocessor">#define SIMPLEMAP_H_</font>
00014 <font class="preprocessor"></font>
00015 <font class="preprocessor">#include &lt;util/datastructures/SimpleVector.h&gt;</font>
00016 
00019 template&lt;class IndexType, class DataType&gt;
<a name="l00020"></a><a class="code" href="classSimpleMap.html">00020</a> <font class="keyword">class </font><a class="code" href="classSimpleMap.html">SimpleMap</a>
00021 {
00022 <font class="keyword">private</font>:
00023     
00024     <font class="keyword">class </font>SimpleMapEntry
00025     {
00026     <font class="keyword">public</font>:
00027         SimpleMapEntry(IndexType key, DataType value)
00028             : m_key(key), m_value(value)<font class="keyword"></font>
00029 <font class="keyword">            </font>{ }
00030         ~SimpleMapEntry()<font class="keyword"></font>
00031 <font class="keyword">            </font>{ }
00032         <font class="keyword">const</font> IndexType GetKey()  <font class="keyword">const</font>
00033             { <font class="keywordflow">return</font> m_key; }
00034         DataType GetValue()<font class="keyword"></font>
00035 <font class="keyword">            </font>{ <font class="keywordflow">return</font> m_value; }
00036         
00037         <font class="keywordtype">void</font> SetValue(DataType value)<font class="keyword"></font>
00038 <font class="keyword">            </font>{ m_value = value; }
00039         
00040     <font class="keyword">private</font>:
00041         IndexType       m_key;
00042         DataType        m_value;
00043     };
00044     
00045 <font class="keyword">public</font>:
00046     
00047     SimpleMap()<font class="keyword"></font>
00048 <font class="keyword">        </font>{ }
00049     ~SimpleMap()<font class="keyword"></font>
00050 <font class="keyword">        </font>{ <a class="code" href="classSimpleMap.html#a9">Clear</a>(); }
00051     
00052     <font class="keywordtype">int</font> Size()<font class="keyword"> const</font>
00053 <font class="keyword">        </font>{ <font class="keywordflow">return</font> m_vEntries.<a class="code" href="classSimpleVector.html#a8">Size</a>(); }
00054 
<a name="l00057"></a><a class="code" href="classSimpleMap.html#a3">00057</a>     <font class="keywordtype">bool</font> <a class="code" href="classSimpleMap.html#a3">GetEntry</a>(<font class="keywordtype">int</font> index, IndexType* pKey, DataType* pValue)<font class="keyword"></font>
00058 <font class="keyword">    </font>{
00059         <font class="keywordflow">if</font> (index &gt;= Size())
00060             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00061         *pKey = m_vEntries[index]-&gt;GetKey();
00062         *pValue = m_vEntries[index]-&gt;GetValue();
00063         <font class="keywordflow">return</font> <font class="keyword">true</font>;
00064     }
00065 
<a name="l00068"></a><a class="code" href="classSimpleMap.html#a4">00068</a>     <font class="keywordtype">void</font> <a class="code" href="classSimpleMap.html#a4">AddEntry</a>(IndexType key, DataType value)<font class="keyword"></font>
00069 <font class="keyword">    </font>{
00070         <font class="keywordtype">int</font> lower = 0, higher = Size() - 1;
00071 
00072         <font class="keywordflow">while</font> (lower &lt;= higher)
00073         {
00074             <font class="keywordtype">int</font> middle = (lower + higher) / 2;
00075 
00076             <font class="keywordflow">if</font> (m_vEntries[middle]-&gt;GetKey() &lt; key)
00077                 lower = middle + 1;
00078             <font class="keywordflow">else</font> <font class="keywordflow">if</font>(m_vEntries[middle]-&gt;GetKey() &gt; key)
00079                 higher = middle - 1;
00080             <font class="keywordflow">else</font>
00081             {
00082                 <font class="comment">// The key is already in the map, so overwrite the value.</font>
00083                 m_vEntries[middle]-&gt;SetValue(value);
00084                 <font class="keywordflow">return</font>;
00085             }
00086         }
00087         m_vEntries.<a class="code" href="classSimpleVector.html#a15">Insert</a>(<font class="keyword">new</font> SimpleMapEntry(key, value), lower);
00088 
00089     }
00090     
<a name="l00093"></a><a class="code" href="classSimpleMap.html#a5">00093</a>     <font class="keywordtype">bool</font> <a class="code" href="classSimpleMap.html#a5">FindEntry</a>(<font class="keyword">const</font> IndexType key, DataType* pValue)<font class="keyword"></font>
00094 <font class="keyword">    </font>{
00095         <font class="keywordtype">int</font> index = FindEntryIndex(key);
00096         <font class="keywordflow">if</font> (index != -1)
00097         {
00098             *pValue = m_vEntries[index]-&gt;GetValue();
00099             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00100         }
00101         <font class="keywordflow">else</font>
00102             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00103     }
00104     
<a name="l00107"></a><a class="code" href="classSimpleMap.html#a6">00107</a>     <font class="keywordtype">bool</font> <a class="code" href="classSimpleMap.html#a5">FindEntry</a>(<font class="keyword">const</font> IndexType key, DataType* pValue)<font class="keyword"> const</font>
00108 <font class="keyword">    </font>{
00109         <font class="keywordtype">int</font> index = FindEntryIndex(key);
00110         <font class="keywordflow">if</font> (index != -1)
00111         {
00112             *pValue = m_vEntries[index]-&gt;GetValue();
00113             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00114         }
00115         <font class="keywordflow">else</font>
00116             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00117     }
00118 
<a name="l00121"></a><a class="code" href="classSimpleMap.html#a7">00121</a>     <font class="keywordtype">void</font> <a class="code" href="classSimpleMap.html#a7">RemoveEntryAtIndex</a>(<font class="keywordtype">int</font> index, IndexType* pKey, DataType* pValue)<font class="keyword"></font>
00122 <font class="keyword">    </font>{
00123         SimpleMapEntry* pEntry = m_vEntries.<a class="code" href="classSimpleVector.html#a6">Remove</a>(index);
00124         *pKey = pEntry-&gt;GetKey();
00125         *pValue = pEntry-&gt;GetValue();
00126         <font class="keyword">delete</font> pEntry;
00127     }
00128 
<a name="l00132"></a><a class="code" href="classSimpleMap.html#a8">00132</a>     <font class="keywordtype">bool</font> <a class="code" href="classSimpleMap.html#a8">RemoveEntryByKey</a>(<font class="keyword">const</font> IndexType key, DataType* pValue)<font class="keyword"></font>
00133 <font class="keyword">    </font>{
00134         <font class="keywordtype">int</font> index = FindEntryIndex(key);
00135         <font class="keywordflow">if</font> (index != -1)
00136         {
00137             SimpleMapEntry* pEntry = m_vEntries.<a class="code" href="classSimpleVector.html#a6">Remove</a>(index);
00138             *pValue = pEntry-&gt;GetValue();
00139             <font class="keyword">delete</font> pEntry;
00140             <font class="keywordflow">return</font> <font class="keyword">true</font>;
00141         }
00142         <font class="keywordflow">else</font>
00143             <font class="keywordflow">return</font> <font class="keyword">false</font>;
00144     }
00145 
<a name="l00147"></a><a class="code" href="classSimpleMap.html#a9">00147</a>     <font class="keywordtype">void</font> <a class="code" href="classSimpleMap.html#a9">Clear</a>()<font class="keyword"></font>
00148 <font class="keyword">    </font>{
00149         <font class="keywordflow">while</font> (!m_vEntries.<a class="code" href="classSimpleVector.html#a9">IsEmpty</a>())
00150             <font class="keyword">delete</font> m_vEntries.<a class="code" href="classSimpleVector.html#a5">PopBack</a>();
00151     }
00152     
00153     
00154 <font class="keyword">private</font>:
00155     
00156     <a class="code" href="classSimpleVector.html">SimpleVector&lt;SimpleMapEntry*&gt;</a>       m_vEntries;
00157 
00158 
00159     <font class="comment">// Gets an index given a key.</font>
00160     <font class="comment">// If the key isn't in the dictionary then -1 is returned.</font>
00161     <font class="keywordtype">int</font> FindEntryIndex(<font class="keyword">const</font> IndexType key)<font class="keyword"> const</font>
00162 <font class="keyword">    </font>{
00163         <font class="keywordtype">int</font> lower = 0, higher = Size() - 1;
00164 
00165         <font class="keywordflow">while</font> (lower &lt;= higher)
00166         {
00167             <font class="keywordtype">int</font> middle = (lower + higher) / 2;
00168 
00169             <font class="keywordflow">if</font> (m_vEntries[middle]-&gt;GetKey() &lt; key)
00170                 lower = middle + 1;
00171             <font class="keywordflow">else</font> <font class="keywordflow">if</font>(m_vEntries[middle]-&gt;GetKey() &gt; key)
00172                 higher = middle - 1;
00173             <font class="keywordflow">else</font>
00174             {
00175                 <font class="comment">// Found</font>
00176                 <font class="keywordflow">return</font> middle;
00177             }
00178         }
00179         <font class="keywordflow">return</font> -1;
00180     }
00181 };
00182 
00183 
00184 <font class="preprocessor">#endif  // SIMPLEMAP_H_</font>
</font></pre></div>
	<hr><br><table width="100%" >
<tr><td align="left" width="33%"><a href="../doxy/SimpleList_8h-source.html" title='SimpleList.h'><img src='../images/previous.gif' width=78 height=10 border='0'></a></td><td align="center" width="33%">
<SCRIPT LANGUAGE="JavaScript">
   if (parent.frames.length>1){
       document.write('<A HREF="JavaScript:SwitchView(0);"><img src="../images/pagevw.gif" width=49 height=10 border="0"></A>');
   }else{
       document.write('<A HREF="JavaScript:SwitchView(1);"><img src="../images/normalvw.gif" width=60 height=8 border="0"></A>');
   }
</SCRIPT>
</td><td align="right" width="33%">
<a href="../doxy/SimpleMetadata_8h-source.html" title='SimpleMetadata.h'><img src='../images/next.gif' width=60 height=10 border='0'></a></td></tr>
</table><p class="Legal">
<a href="JavaScript:ShowCopyright();">Copyright &#169; 1998 - 2001</a> Interactive Objects<SUP><FONT SIZE="-3">TM</FONT></SUP>. All rights reserved.
<br>

 Last Modified on Oct 24, 2001 3:59 pm
</p>
</body>

</html>
